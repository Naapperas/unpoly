<html>
<body>

<a href="/foo" id="link">link</a>

<div id="div">content</div>

<script>
  setTimeout(function() {
    console.log("Init. activeElement is %o, :focus-visible is %o", document.activeElement, document.activeElement.matches(':focus-visible'))
  }, 100)

  setTimeout(function() {
    let link = document.querySelector('#link')
    link.focus()
    console.log("Focused link. activeElement is %o, :focus-visible is %o", document.activeElement, document.activeElement.matches(':focus-visible'))
  }, 500)

  setTimeout(function() {
    let div = document.querySelector('#div')
    div.setAttribute('tabindex', '-1')
    div.focus()
    console.log("Focused div. activeElement is %o, :focus-visible is %o", document.activeElement, document.activeElement.matches(':focus-visible'))
  }, 550)
</script>

</body>
</html>

